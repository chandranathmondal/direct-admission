version: '3.8'
services:
  web:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        REACT_APP_INITIAL_ADMIN_EMAIL: ${REACT_APP_INITIAL_ADMIN_EMAIL}
        REACT_APP_GOOGLE_CLIENT_ID: ${REACT_APP_GOOGLE_CLIENT_ID}
    image: direct-admission:local
    ports:
      - "${PORT}:${PORT}"
    restart: unless-stopped
    env_file:
      - .env
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost:8080/ || exit 1"]
      interval: 30s
      timeout: 5s
      retries: 3